<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>A gift for youüíê</title>
<link href="https://fonts.googleapis.com/css2?family=Alex+Brush&display=swap" rel="stylesheet">
<style>
:root {
  --petal-color-light: #ff6482;
  --petal-color-dark: #d62463;
  --card-bg: rgba(255, 240, 245, 0.92);
  --card-border: rgba(255, 160, 176, 0.8);
  --accent-color: #b5179e;
}

body {
  margin: 0;
  overflow: hidden;
  font-family: 'Alex Brush', cursive;
  background: radial-gradient(circle at center, #fff5f7 0%, #ffe0eb 60%, #ffc2d1 100%);
  height: 100vh;
  display: flex;
  justify-content: center;
  align-items: center;
}

/* -------------------- 0. M√ÄN H√åNH M·ªû ƒê·∫¶U (N√∫t Duy Nh·∫•t) -------------------- */
#coverScreen {
  position: fixed;
  inset: 0;
  background: radial-gradient(circle at center, #fff5f7 0%, #ffe0eb 100%);
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  z-index: 11; 
  transition: opacity 1s ease;
}
#btnReveal {
  background: linear-gradient(135deg, #a82084, #d62463);
  color: white;
  border: none;
  padding: 20px 50px;
  font-size: 30px;
  font-family: 'Alex Brush', cursive;
  border-radius: 15px;
  cursor: pointer;
  box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
  transition: background 0.3s, transform 0.2s;
}
#btnReveal:hover {
  background: linear-gradient(135deg, #702963, #a82084);
  transform: scale(1.05);
}


/* -------------------- 1. M√ÄN H√åNH L·ªúI D·∫™N/LOADING (V√† Kh√≥a) -------------------- */
#loadingScreen {
  position: fixed;
  inset: 0;
  background: radial-gradient(circle at center, #fff5f7 0%, #ffe0eb 100%);
  display: none; 
  flex-direction: column;
  justify-content: center;
  align-items: center;
  z-index: 10; 
  text-align: center;
  opacity: 0; 
  transition: opacity 1s ease;
}
#loadingScreen.active {
    display: flex;
    opacity: 1;
}
#introText {
  font-size: 36px;
  color: var(--accent-color);
  font-weight: bold;
}
/* Style cho input v√† n√∫t verify */
#recipientName {
    padding: 10px;
    margin-top: 20px;
    font-size: 18px;
    border: 2px solid var(--accent-color);
    border-radius: 8px;
    text-align: center;
    font-family: sans-serif;
    outline: none;
    transition: border-color 0.3s;
}
#recipientName:focus {
    border-color: #ff4d6d;
}
#btnVerify {
    margin-top: 15px;
    background: linear-gradient(135deg, #00b894, #55efc4);
    color: white;
    border: none;
    padding: 10px 30px;
    font-size: 20px;
    font-family: 'Alex Brush', cursive;
    border-radius: 10px;
    cursor: pointer;
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
    transition: background 0.3s;
}
#btnVerify:hover {
    background: linear-gradient(135deg, #00947a, #00b894);
}
/* Style cho n√∫t Start */
#btnStart {
  margin-top: 30px;
  background: linear-gradient(135deg, #ff4d6d, #ff85a1);
  color: white;
  border: none;
  padding: 15px 40px;
  font-size: 24px;
  font-family: 'Alex Brush', cursive;
  border-radius: 15px;
  cursor: pointer;
  box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
  transition: background 0.3s, transform 0.2s;
}
#btnStart:hover {
  background: linear-gradient(135deg, #c9184a, #ff4d6d);
  transform: scale(1.05);
}

/* --- KEYFRAMES CHO XOAY LI√äN T·ª§C --- */
@keyframes rotateSlowly {
    to { transform: translate(-50%, -50%) rotate(360deg); }
}

/* -------------------- 2. HI·ªÜU ·ª®NG HOA H·ªíNG N·ªû -------------------- */
.rose {
  position: absolute;
  width: 200px;
  height: 200px;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%) scale(0);
  animation: rotateSlowly 30s linear infinite; 
  z-index: 2;
}
.rose.start-animation {
  animation: bloom 1s ease-in-out forwards, rotateSlowly 30s linear infinite paused; 
}
.petal {
  position: absolute;
  width: 100px;
  height: 100px;
  background: radial-gradient(circle at center, var(--petal-color-light) 0%, var(--petal-color-dark) 80%);
  border-radius: 50% 50% 0 50%;
  transform-origin: bottom right;
  opacity: 0;
  transform: rotate(var(--rot, 0deg)); 
}
.petal.start-animation {
    animation: openPetal 1s forwards;
}

@keyframes openPetal {
  0% { opacity: 0; transform: scale(0) rotate(var(--rot)); }
  100% { opacity: 1; transform: scale(1) rotate(var(--rot)); }
}
@keyframes bloom {
  0% { transform: translate(-50%, -50%) scale(0); opacity: 0; }
  60% { transform: translate(-50%, -50%) scale(1.2); opacity: 1; }
  100% { transform: translate(-50%, -50%) scale(1); opacity: 1; }
}

/* --- HI·ªÜU ·ª®NG C√ÅNH HOA BAY (DRIFTING PETALS) --- */
.drifting-petal {
    position: absolute;
    width: 20px;
    height: 20px;
    background: var(--petal-color-light);
    border-radius: 50%;
    opacity: 0;
    z-index: 2;
    animation: drift 2.5s ease-out forwards;
}

@keyframes drift {
    0% { opacity: 0.8; transform: translate(0, 0) rotate(0deg) scale(0.5); }
    100% { opacity: 0; transform: translate(var(--dx), var(--dy)) rotate(var(--deg)) scale(1); }
}

/* --- HI·ªÜU ·ª®NG KHI HOA N·ªû XONG (Sparkle/Light Ray) --- */
.sparkle-ring {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%) scale(0);
    border: 2px solid white;
    border-radius: 50%;
    animation: sparkleRingEffect 1s ease-out forwards;
    z-index: 2;
}
@keyframes sparkleRingEffect {
    0% { transform: translate(-50%, -50%) scale(0); opacity: 1; border-width: 2px;}
    100% { transform: translate(-50%, -50%) scale(2); opacity: 0; border-width: 0px; width: 100px; height: 100px;}
}
.tiny-sparkle {
    position: absolute;
    width: 8px;
    height: 8px;
    background-color: #fff;
    border-radius: 50%;
    opacity: 0;
    animation: tinySparkleEffect 1.5s ease-out forwards;
    z-index: 2;
}
@keyframes tinySparkleEffect {
    0% { opacity: 0; transform: translate(0, 0) scale(0); }
    30% { opacity: 1; transform: translate(var(--x, 0), var(--y, 0)) scale(1); }
    100% { opacity: 0; transform: translate(var(--x-end, 0), var(--y-end, 0)) scale(0); }
}
.light-ray {
    position: absolute;
    top: 50%;
    left: 50%;
    width: 2px;
    height: 50px;
    background: linear-gradient(to bottom, #fff, transparent);
    transform-origin: top center;
    transform: translate(-50%, -50%) rotate(var(--deg, 0deg)) scaleY(0);
    opacity: 0;
    animation: lightRayEffect 1s ease-out forwards;
    z-index: 2;
}
@keyframes lightRayEffect {
    0% { opacity: 0; transform: translate(-50%, -50%) rotate(var(--deg)) scaleY(0); }
    50% { opacity: 0.8; transform: translate(-50%, -50%) rotate(var(--deg)) scaleY(1); }
    100% { opacity: 0; transform: translate(-50%, -50%) rotate(var(--deg)) scaleY(0); }
}


/* -------------------- 3. THI·ªÜP CH√öC M·ª™NG -------------------- */
.card {
  position: absolute;
  width: 420px;
  height: 300px;
  background: var(--card-bg);
  border: 2px solid var(--card-border);
  border-radius: 20px;
  box-shadow: 0 10px 45px rgba(0,0,0,0.15);
  text-align: center;
  padding: 40px;
  transform: translateY(50px) scale(0);
  opacity: 0;
  z-index: 3;
}
.card.show-card {
  animation: showCard 1.5s 3.5s cubic-bezier(0.68, -0.55, 0.27, 1.55) forwards; 
  backdrop-filter: blur(8px);
}

@keyframes showCard {
  0% { transform: translateY(50px) scale(0); opacity: 0; }
  60% { transform: translateY(-10px) scale(1.05); opacity: 1; }
  100% { transform: translateY(0) scale(1); opacity: 1; }
}

/* --- HI·ªÜU ·ª®NG M√ÇY H·ªíNG KHI THI·ªÜP M·ªû --- */
.pink-cloud {
    position: absolute;
    bottom: 0;
    left: 50%;
    transform: translateX(-50%) scale(0);
    width: 200px;
    height: 100px;
    background: radial-gradient(ellipse at center, rgba(255, 192, 203, 0.7) 0%, rgba(255, 192, 203, 0) 70%);
    border-radius: 50%;
    animation: cloudEffect 2s ease-out forwards;
    opacity: 0;
    z-index: 2;
}
@keyframes cloudEffect {
    0% { transform: translateX(-50%) scale(0); opacity: 0; bottom: 0; }
    30% { transform: translateX(-50%) scale(1.2); opacity: 0.7; }
    100% { transform: translateX(-50%) scale(1); opacity: 0; bottom: 150px; }
}

.card h2 {
  color: var(--accent-color);
  font-size: 42px;
  text-shadow: 2px 2px 5px rgba(255, 192, 203, 0.6);
  margin-bottom: 15px;
  letter-spacing: 1px;
}
.card p {
  font-size: 26px;
  color: #702963;
  line-height: 1.6em;
  text-shadow: 1px 1px 3px rgba(255, 182, 193, 0.4);
}

/* N√∫t m·ªü nh·∫°c (T·ª± ƒë·ªông ·∫©n sau khi nh·∫°c b·∫≠t) */
button#btnMusic {
  margin-top: 25px;
  background: linear-gradient(135deg, #ff4d6d, #ff85a1);
  color: white;
  border: none;
  padding: 12px 30px;
  font-size: 22px;
  font-family: 'Alex Brush', cursive;
  border-radius: 12px;
  cursor: pointer;
  transition: background 0.3s, transform 0.2s;
  animation: hideButton 0.5s 5.5s forwards;
}

@keyframes hideButton {
    to { opacity: 0; transform: scale(0); pointer-events: none; }
}

/* -------------------- 4. Hoa r∆°i (Rain) -------------------- */
.flower {
  position: fixed;
  width: 18px;
  height: 18px;
  background: radial-gradient(circle, #ffafcc 40%, transparent 41%);
  border-radius: 50%;
  animation: fall 6s linear infinite;
  opacity: 0.8;
  z-index: 1;
}
@keyframes fall {
  0% { transform: translateY(-10px) rotate(0deg); opacity: 0.8; }
  100% { transform: translateY(100vh) rotate(360deg); opacity: 0; }
}
</style>
</head>
<body>

<div id="coverScreen">
    <button id="btnReveal">M·ªü Thi·ªáp üíå</button>
</div>

<div id="loadingScreen">
  <div id="introText">
    Ch√†o m·ª´ng b·∫°n ƒë·∫øn v·ªõi thi·ªáp 20/10! üíñ<br>
    <small style="font-size: 18px; font-family: 'Alex Brush'; color: #a82084;">Nh·∫≠p m·∫≠t kh·∫©u ƒë·ªÉ xem hoa n·ªü r·ª±c r·ª° nh√©.</small>
  </div>
  
  <input type="text" id="recipientName" placeholder="Your birthday">
  <button id="btnVerify">X√°c nh·∫≠n</button>

  <button id="btnStart" style="display: none;">B·∫Øt ƒë·∫ßu üíê</button>

</div>

<div class="rose" id="rose"> 
    <div class="petal" id="petal-1" style="--rot:0deg;"></div>
    <div class="petal" id="petal-2" style="--rot:60deg;"></div>
    <div class="petal" id="petal-3" style="--rot:120deg;"></div>
    <div class="petal" id="petal-4" style="--rot:180deg;"></div>
    <div class="petal" id="petal-5" style="--rot:240deg;"></div>
    <div class="petal" id="petal-6" style="--rot:300deg;"></div>
</div>

<div class="pink-cloud" id="pinkCloud"></div>

<div class="card" id="card">
  <h2>Ch√∫c M·ª´ng Ng√†y Ph·ª• N·ªØ Vi·ªát Nam 20/10 üíñ</h2>
  <p id="wish"></p>
  <button id="btnMusic">M·ªü nh·∫°c üéµ</button>
</div>

<audio id="introBGM" loop>
    <source src="https://www.bensound.com/bensound-music/bensound-sweet.mp3" type="audio/mpeg">
</audio>

<audio id="bgm" loop>
  <source src="https://www.bensound.com/bensound-music/bensound-tenderness.mp3" type="audio/mpeg">
</audio>

<script>
// ---------- KHAI B√ÅO BI·∫æN & C·∫§U H√åNH ----------
const wishes = [
  "Ch√∫c em lu√¥n nh·∫≠n ƒë∆∞·ª£c nhi·ªÅu ƒëi·ªÅu may m·∫Øn v√† nh·ªØng l·ªùi y√™u th∆∞∆°ng nhaüå∏"
];
document.getElementById("wish").innerText =
  wishes[Math.floor(Math.random() * wishes.length)];

// KHAI B√ÅO T√äN NG∆Ø·ªúI NH·∫¨N B√ç M·∫¨T (CH·ªà ƒê·ªîI PH·∫¶N N√ÄY)
const CORRECT_PASSWORD = "02092006"; 

const coverScreen = document.getElementById("coverScreen"); 
const btnReveal = document.getElementById("btnReveal"); 
const loadingScreen = document.getElementById("loadingScreen");
const recipientNameInput = document.getElementById("recipientName");
const btnVerify = document.getElementById("btnVerify");
const btnStart = document.getElementById("btnStart");
const rose = document.getElementById("rose");
const card = document.getElementById("card");
const pinkCloud = document.getElementById("pinkCloud");
const introBGM = document.getElementById("introBGM"); 
const bgm = document.getElementById("bgm"); 
const btnMusic = document.getElementById("btnMusic");
const petals = [
    document.getElementById("petal-1"),
    document.getElementById("petal-2"),
    document.getElementById("petal-3"),
    document.getElementById("petal-4"),
    document.getElementById("petal-5"),
    document.getElementById("petal-6")
];

// ---------- H√ÄM PH√ÅT & D·ª™NG NH·∫†C ----------
function playIntroMusic() {
  introBGM.play().catch(e => {
    console.error("L·ªói khi ph√°t Intro BGM:", e);
  });
}

function playCardMusic() {
  bgm.play().catch(() => {
    // X·ª≠ l√Ω khi tr√¨nh duy·ªát ch·∫∑n t·ª± ƒë·ªông ph√°t
    alert("Tr√¨nh duy·ªát ƒë√£ ch·∫∑n t·ª± ƒë·ªông ph√°t nh·∫°c! Vui l√≤ng b·∫•m v√†o n√∫t 'M·ªü nh·∫°c üéµ' ƒë·ªÉ k√≠ch ho·∫°t.");
    btnMusic.style.opacity = 1; 
    btnMusic.style.pointerEvents = 'auto';
    btnMusic.removeEventListener('click', playCardMusic); 
    btnMusic.addEventListener('click', () => { 
        bgm.play().catch(() => {});
        btnMusic.style.display = 'none';
    });
  });
}

function stopIntroMusic() {
    introBGM.pause();
    introBGM.currentTime = 0; 
}

// ---------- H√ÄM T·∫†O HI·ªÜU ·ª®NG (Gi·ªØ nguy√™n) ----------
function createFlowerCompletionEffects() {
    const roseRect = rose.getBoundingClientRect();
    const centerX = roseRect.left + roseRect.width / 2;
    const centerY = roseRect.top + roseRect.height / 2;

    const sparkleRing = document.createElement("div");
    sparkleRing.classList.add("sparkle-ring");
    sparkleRing.style.left = `${centerX}px`;
    sparkleRing.style.top = `${centerY}px`;
    document.body.appendChild(sparkleRing);
    setTimeout(() => sparkleRing.remove(), 1000);

    for (let i = 0; i < 5; i++) {
        const tinySparkle = document.createElement("div");
        tinySparkle.classList.add("tiny-sparkle");
        tinySparkle.style.left = `${centerX}px`;
        tinySparkle.style.top = `${centerY}px`;
        const angle = Math.random() * Math.PI * 2;
        const radius = 30 + Math.random() * 20;
        tinySparkle.style.setProperty('--x', `${Math.cos(angle) * radius}px`);
        tinySparkle.style.setProperty('--y', `${Math.sin(angle) * radius}px`);
        tinySparkle.style.setProperty('--x-end', `${Math.cos(angle) * (radius + 20)}px`);
        tinySparkle.style.setProperty('--y-end', `${Math.sin(angle) * (radius + 20)}px`);
        document.body.appendChild(tinySparkle);
        setTimeout(() => tinySparkle.remove(), 1500);
    }

    for (let i = 0; i < 4; i++) {
        const lightRay = document.createElement("div");
        lightRay.classList.add("light-ray");
        lightRay.style.left = `${centerX}px`;
        lightRay.style.top = `${centerY}px`;
        lightRay.style.setProperty('--deg', `${i * 90 + Math.random() * 30}deg`);
        document.body.appendChild(lightRay);
        setTimeout(() => lightRay.remove(), 1000);
    }
}

function createDriftingPetals() {
    const roseRect = rose.getBoundingClientRect();
    const centerX = roseRect.left + roseRect.width / 2;
    const centerY = roseRect.top + roseRect.height / 2;

    for (let i = 0; i < 6; i++) {
        const petal = document.createElement("div");
        petal.classList.add("drifting-petal");
        petal.style.left = `${centerX}px`;
        petal.style.top = `${centerY}px`;
        
        const angle = Math.random() * Math.PI * 2;
        const distance = 80 + Math.random() * 50;
        petal.style.setProperty('--dx', `${Math.cos(angle) * distance}px`);
        petal.style.setProperty('--dy', `${Math.sin(angle) * distance}px`);
        petal.style.setProperty('--deg', `${Math.random() * 720 - 360}deg`);
        
        petal.style.animationDelay = `${Math.random() * 0.5}s`;
        document.body.appendChild(petal);
        setTimeout(() => petal.remove(), 3000);
    }
}

function createFlowerRainParticle() {
  const flower = document.createElement("div");
  flower.classList.add("flower");
  flower.style.left = Math.random() * 100 + "vw";
  flower.style.animationDuration = 4 + Math.random() * 3 + "s";
  flower.style.animationDelay = -Math.random() * 5 + "s"; 
  document.body.appendChild(flower);
  setTimeout(() => flower.remove(), 7000);
}

function startFlowerRain() {
    setInterval(createFlowerRainParticle, 800);
}

// ===================================================================
// LOGIC CHUY·ªÇN M√ÄN H√åNH & X√ÅC TH·ª∞C
// ===================================================================

// K√≠ch ho·∫°t khi nh·∫•n n√∫t 'M·ªü Thi·ªáp üíå' (B∆∞·ªõc 1: B·∫≠t Intro & Chuy·ªÉn m√†n h√¨nh)
btnReveal.addEventListener('click', () => {
    playIntroMusic();
    
    coverScreen.style.opacity = 0;
    setTimeout(() => {
        coverScreen.style.display = 'none';
        loadingScreen.classList.add('active'); 
    }, 1000); 
});

// LOGIC X√ÅC TH·ª∞C KHI NH·∫§N N√öT "X√°c nh·∫≠n" (B∆∞·ªõc 2: X√°c th·ª±c)
btnVerify.addEventListener('click', () => {
    const enteredName = recipientNameInput.value.trim();
    
    if (enteredName.toLowerCase() === CORRECT_PASSWORD.toLowerCase()) { // So s√°nh kh√¥ng ph√¢n bi·ªát ch·ªØ hoa/th∆∞·ªùng
        alert("X√°c nh·∫≠n th√†nh c√¥ng! B·∫Øt ƒë·∫ßu xem thi·ªáp nh√© üíê");
        
        // ·∫®n √¥ nh·∫≠p li·ªáu/n√∫t x√°c nh·∫≠n
        recipientNameInput.style.display = 'none';
        btnVerify.style.display = 'none';
        
        // Hi·ªán n√∫t "B·∫Øt ƒë·∫ßu" v√† thay ƒë·ªïi l·ªùi d·∫´n
        document.getElementById("introText").innerHTML = `
            M·ªôt m√≥n qu√† d√†nh cho V≈© Lan H∆∞∆°ng nh√¢n ng√†y 20/10 n√®! üíñ<br>
            <small style="font-size: 18px; font-family: 'Alex Brush'; color: #a82084;">
                Nh·∫•n n√∫t B·∫Øt ƒë·∫ßu ƒë·ªÉ xem ƒëi·ªÅu b·∫•t ng·ªù nh√©.
            </small>`;
        btnStart.style.display = 'block'; // Hi·ªÉn th·ªã n√∫t b·∫Øt ƒë·∫ßu th·∫≠t s·ª±
        
    } else {
        alert("T√™n/M·∫≠t kh·∫©u kh√¥ng ch√≠nh x√°c. Vui l√≤ng th·ª≠ l·∫°i.");
        recipientNameInput.value = ""; 
    }
});


// LOGIC KHI B·∫§M N√öT "B·∫Øt ƒë·∫ßu üíê" (B∆∞·ªõc 3: Ch·∫°y Animation & Chuy·ªÉn Nh·∫°c)
btnStart.addEventListener('click', () => {
    
    loadingScreen.style.opacity = 0;
    rose.classList.add('start-animation');
    
    createDriftingPetals(); 
    
    let petalDelay = 1.0; 
    petals.forEach((petal, index) => {
        petal.classList.add('start-animation');
        petal.style.animationDelay = `${petalDelay + index * 0.3}s`;
    });

    card.classList.add('show-card');
    
    // 1. D·ª™NG NH·∫†C INTRO: D·ª´ng ngay tr∆∞·ªõc khi nh·∫°c ch√≠nh b·∫≠t (8 gi√¢y)
    setTimeout(() => {
        stopIntroMusic(); 
        createFlowerCompletionEffects();
    }, 3000); 

    // 2. K√≠ch ho·∫°t hi·ªáu ·ª©ng M√¢y h·ªìng 
    setTimeout(() => {
        pinkCloud.classList.add('show-cloud');
    }, 3500);

    // 3. NH·∫†C THI·ªÜP B·∫¨T NGAY SAU KHI NH·∫†C INTRO D·ª™NG (8.2 gi√¢y)
    setTimeout(() => {
        playCardMusic(); 
    }, 5200); 

    // 4. B·∫Øt ƒë·∫ßu hi·ªáu ·ª©ng Hoa r∆°i (Rain) 
    setTimeout(() => {
        if(loadingScreen) loadingScreen.remove();
        startFlowerRain();
    }, 5500); 
});
</script>
</body>
</html>